<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <title>Contador de puntos - Free Fire</title>
  <style>
  *{
      box-sizing: border-box;
      
    }
    html{
            
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
              height: 100%;
            
        }
    body {
    
  
  margin: 0;
  padding: 0;
  color:#666666 ;
  background-color: #666666;
}
header{
background-color: rgb(35, 36, 46);
position: fixed;
top: 0;
width: 100%;
padding: 5px 10px;
display: flex;
justify-content: space-between;
z-index: 10;
}
main{
  max-width: 800px;
  margin: 90px auto;
  overflow: hidden;
  display: flex;
}
.container{
  max-width: 20%;
}
.containerR{
  max-width: 78%;
  width: 380px;
  margin: 50px auto;
  padding: 5px;
   }
/* Ajuste para que el top 1 quede en el centro */
.image-box:nth-child(2) {
    display: block;
    margin: 0 auto;
}
#image-box2{
  left: -50px;
  margin-top: -60px;
}
 #image-box3{
  right: -40px; /* Mueve la imagen del top 3 más a la derecha */
  margin-top: -60px;
 }

/* Estilo Claro para Tabla con Esquinas Redondeadas */
.tablecontainer {
  margin-top: 10px;
  overflow-x: auto;
  
}

table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 4px;
  margin-top: 10px;
  background: #ebc700;
  border-radius: 4px;
  padding: 10px;
}

th, td {
  padding: 3px 4px;
  text-align: center;
  -moz-transform: skew(-20deg, 0deg);
-webkit-transform: skew(-20deg, 0deg);
-o-transform: skew(-20deg, 0deg);
-ms-transform: skew(-20deg, 0deg);
transform: skew(-20deg, 0deg);
}

th {
 
  background-color: #2e2e2e;
  color: #ffffff;
  font-size: 0.9em;
  font-weight: 700;
  font-family: "Arial Black", Gadget, sans-serif;
  text-shadow: -1px 1px 1px #000000;
  text-decoration: none;
font-variant: normal;
text-transform: uppercase;
}
td{
  
  
  background-color: rgb(98, 98, 98);
  color: #ffffff;
  font-weight: 400;
  font-size: 0.8em;
  text-decoration: none;
  font-family: Arial, Helvetica, sans-serif;
font-variant: normal;
letter-spacing: 1px;

}


.container {
  
  
  margin: 50px auto;
  padding: 5px;
  
}


.top-clans {
    text-align: center;
    width: 100%;
}
h3{
  background-color: rgb(0, 61, 107, 0.7);
  color: #ffffff;
  width: max-content;
  margin: auto;
  margin-bottom: 20px;
  padding: 3px 10px;
  border-radius: 10px;
  
}

.image-box {
    display: inline-block;
    text-align: center;
    margin: 10px;
    gap: 150px;
    position: relative;
}


#img1 {
    position: relative;
    top: -20px; /* Sube la imagen del top 1 */
    z-index: 2;
    max-width: 90px;
    margin-top: 25px;
    margin-bottom: -10px;
}

#img2, #img3 {
    position: relative;
    top: -10px; /* Baja un poco las imágenes del top 2 y 3 */
    z-index: 1;
    max-width: 80px;
}
#img2{
  max-width: 80px;
  margin-bottom: 0;
}
#img3{
  max-width: 70px;
  margin-bottom: -50;
}
p{
  background-color: rgb(0, 61, 107, 0.7);
  color: #ffffff;
  margin-top: 0px;
  font-size: 0.8em;
  font-weight: 600;
  border-radius: 8px;
  padding: 4px 8px;
 
  
}
#top2, #top3{
 
  width: max-content;
  margin: auto;
  
}




/* Inputs y botones */
input {
  width: calc(100% - 20px);
  padding: 10px;
  margin: 10px 0;
  border: none;
  border-radius: 6px;
  background: #252525;
  color: white;
  text-align: center;
}

button {
  width: max-content;
  padding: 5px;
  margin-top: 10px;
  border: none;
  border-radius: 6px;
  background: #0085FF;
  color: white;
  font-weight: bold;
  cursor: pointer;
 
}

button:hover {
  background:
#003E75;
}
footer{
  width: 100%;
}
iframe{
  width: 100%;
  height: 500px;
}
.toggleDiv {
            display: none;
            padding: 10px;
            margin-top: 10px;
            
        }

@media (max-width: 768px) {
  main{
    display: flex;
    flex-direction: column;
  }
  .container, .containerR{
    max-width: 100%;
  }
  
  input, button {
    font-size: 1rem;
  }
}
  </style>
</head>
<body>
  <header>
    <h2>UNDSCORES</h2>
  </header>
  <main>
    <div class="container">
      <input type="text" id="player-namee" placeholder="Nombre de equipo" />
      <input type="number" id="killss" placeholder="Cantidad de Kills:" />
      <input type="number" id="positionn" placeholder="Posición Obtenida:" />
      <button onclick="calcularPuntos()">Añadir</button>
      <button onclick="reiniciarResultados()">Reiniciar Resultados</button>
      <button style="width: 32%;" onclick="capturarImagen()">Capturar Imagen</button>
    </div>
    <div class="containerR">
      <div class="result" id="result"></div>
      <div class="tablecontainer">
        <table id="results-table">
          <thead>
            <tr>
              <th>Top</th>
              <th>Equipo</th>
              <th>Kills</th>
              <th>Pts</th>
              <th>By</th>
            </tr>
          </thead>
          <tbody id="table-body">
          </tbody>
        </table>
      </div>
    </div>
  </main>
  <footer>

    <iframe src="nuevocontador.html" frameborder="0"></iframe>
  </footer>

  <script>
    const puntosPorKill = 2;
    const puntosPorPosicion = [15, 12, 10, 8, 7, 6, 5, 4, 3, 2, 1, 0];

    let resultados = JSON.parse(localStorage.getItem('resultadoss')) || [];

    function calcularPuntos() {
      const playerName = document.getElementById('player-namee').value.trim();
      if (!playerName) {
        alert('Por favor, ingresa el nombre del clan.');
        return;
      }

      const kills = parseInt(document.getElementById('killss').value) || 0;
      const posicion = parseInt(document.getElementById('positionn').value) || 0;

      

      const puntos = (kills * puntosPorKill) + (puntosPorPosicion[posicion - 1] || 0);
      const index = resultados.findIndex(resultado => resultado.nombre.toLowerCase() === playerName.toLowerCase());

      if (index !== -1) {
        resultados[index].kills += kills;
        resultados[index].puntos += puntos;
        if (posicion === 1) {
          resultados[index].booyah = (resultados[index].booyah || 0) + 1;
        }
      } else {
        resultados.push({ nombre: playerName, kills, puntos, booyah: posicion === 1 ? 1 : 0 });
      }

      resultados.sort((a, b) => b.puntos - a.puntos);
      localStorage.setItem('resultadoss', JSON.stringify(resultados));

      mostrarResultados();
    }

    function mostrarResultados() {
      const resultsTableBody = document.querySelector('#results-table tbody');
      resultsTableBody.innerHTML = '';

      for (let i = 0; i < 12; i++) {
        const row = document.createElement('tr');
        const resultado = resultados[i] || { nombre: '---', kills: 0, puntos: 0, booyah: 0 };

        row.innerHTML = `
          <td>${i + 1}</td>
          <td onclick="seleccionarEquipo('${resultado.nombre}')">${resultado.nombre}</td>
          <td>${resultado.kills}</td>
          <td>${resultado.puntos}</td>
          <td>${resultado.booyah}</td>
        `;

        resultsTableBody.appendChild(row);
      }
    }

    function reiniciarResultados() {
      if (confirm('¿Estás seguro de reiniciar los resultados? Esta acción no se puede deshacer.')) {
        resultados = [];
        localStorage.removeItem('resultadoss');
        mostrarResultados();
      }
    }

    function seleccionarEquipo(nombre) {
      document.getElementById('player-namee').value = nombre;
    }

    mostrarResultados();

    function capturarImagen() {
      const contenedor = document.querySelector('.tablecontainer');

      html2canvas(contenedor, {
        scale: 3,
        onrendered: function (canvas) {
          const imagen = canvas.toDataURL("image/png");
          const enlace = document.createElement('a');
          enlace.href = imagen;
          enlace.download = 'imagen-contenido.png';
          document.body.appendChild(enlace);
          enlace.click();
          document.body.removeChild(enlace);
        }
      });
    }
  </script>
</body>
</html>
